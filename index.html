<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cors testing</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>

</head>
<body>
    
</body>
<script>
    const GoogleScriptUrl=`https://script.google.com/macros/s/AKfycbwtMM3fpGDQT6hysqG5oSBM3xKdIyUxccXFeqbNcMHdzRWMQ8xLs9RgJP8UkWyQFCuUvw/exec`;

    const URL_SERVICE=`?name="AD"&pass="123"`;
    const URL=GoogleScriptUrl+URL_SERVICE;

    // fetch (URL, {
    //         redirect: "follow",
    //         method: "GET",
    //         mode: 'cors',
    //         headers: {           
    //         "Content-Type": "text/plain;charset=utf-8",
    //         }
    //     })
    //     .then (res => res.json())
    //     .then (data => {
    //         console.log(data);
    //         console.log(JSON.stringify(data));
    // });


    async function sendLoginData(username, password) {
  // Hash the password
  try {
  const hashedPassword = await hashPassword(password);

  // Send the hashed password and username to Google Apps Script
  const response = await fetch(URL, {
    method: 'POST',   
    body: JSON.stringify({
      username: username,
      password: hashedPassword // Send the hashed password
    }),
  });

  if (!response.ok) {
    throw new Error(`Network response was not ok: ${response.statusText}`);
  }
  try {
  const result = await response.json();
  console.log(result);
  } catch (err) {
    //console.error('Error 1 is that:', err);   
  }

  } catch (error) {
     console.error('Error 2 is that:', error);   
  }
}

sendLoginData('123','ABC');
console.log('sen!');
</script>
</html>
